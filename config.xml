<project>
<actions/>
<description/>
<keepDependencies>false</keepDependencies>
<properties>
<com.sonyericsson.rebuild.RebuildSettings plugin="rebuild@1.22">
<autoRebuild>false</autoRebuild>
</com.sonyericsson.rebuild.RebuildSettings>
</properties>
<scm class="hudson.scm.NullSCM"/>
<canRoam>true</canRoam>
<disabled>false</disabled>
<blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
<blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
<triggers/>
<concurrentBuild>false</concurrentBuild>
<builders>
<javaposse.jobdsl.plugin.ExecuteDslScripts plugin="job-dsl@1.44">
<scriptText>
def project = 'malaybiswal/icertportal' def branchApi = new URL("https://api.github.com/repos/${project}/branches") def branches = new groovy.json.JsonSlurper().parse(branchApi.newReader()) branches.each { def branchName = it.name def jobName = "${project}-${branchName}".replaceAll('/','-') job(jobName) { scm { git{ remote{ github("${project}") refspec('+refs/pull/*:refs/remotes/origin/pr/*') } } } steps { shell('#!/usr/bin/env bash[[ -s "/usr/local/rvm/scripts/rvm" ]] && source "/usr/local/rvm/scripts/rvm"export http_proxy=http://proxy.ord1.rackspace.com:3128export https_proxy=http://proxy.ord1.rackspace.com:3128rvm use jruby-1.7.24cd /var/lib/jenkins/workspace/CBUI_SESSION_DEV_CIecho ""echo "-------------------------"echo "Environment Info"echo "-------------------------"echo "ruby version : `ruby --version`"echo "npm version : `npm --version`"echo "bower version: `bower --version`"echo "gulp version: `gulp --version`"echo ""echo "-------------------------"echo "Installing Ruby Dependencies"echo "-------------------------"bundle installecho ""echo "-------------------------"echo "Testing Ruby Code (Rspec)"echo "-------------------------"#bundle exec rspececho ""echo "-------------------------"echo "Packaging................"echo "-------------------------"rake package') } triggers { githubPullRequest { useGitHubHooks() permitAll() autoCloseFailedPullRequests() displayBuildErrorsOnDownstreamBuilds() } } } }
</scriptText>
<usingScriptText>true</usingScriptText>
<ignoreExisting>false</ignoreExisting>
<removedJobAction>IGNORE</removedJobAction>
<removedViewAction>IGNORE</removedViewAction>
<lookupStrategy>JENKINS_ROOT</lookupStrategy>
<additionalClasspath/>
</javaposse.jobdsl.plugin.ExecuteDslScripts>
</builders>
<publishers/>
<buildWrappers/>
</project>
